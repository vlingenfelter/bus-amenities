<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.3/leaflet.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.3/leaflet.js">
  </script>
  <link href="https://fonts.googleapis.com/css?family=Comfortaa|Emblema+One|Libre+Franklin" rel="stylesheet">
  <link rel="stylesheet" href="bustool.css">
  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.min.js">
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script type='text/javascript' src="towns.js"></script>
  <script type='text/javascript' src="stops.js"></script>
  <script type='text/javascript' src="allstops1012.js"></script>
  <script type='text/javascript' src="allstops1005.js"></script>
  <script type='text/javascript' src="allstops1011.js"></script>
  </script>
</head>

<body>


  <!-- Put entire document inside one Bootstrap row -->
  <div class="row">
    <!-- Create  the tool bar column.
    This exists inside a single Bootstrap Column that has an absolute location on the left side of the page-->
    <div class="col-4" id="left-hand-tools">
      <!-- Create title bar -->
      <header class="title">
        <h1><img src="opmibus.png" alt="" height="40px"> SLIDE </h1>
        <p style="color:white">Street-Level Infrastructure Distribution Engine</p>
      </header>

      <div class="button-bag">

        <button type="button" class="btn btn-block" data-toggle="modal" data-target="#welcome" id="welcomebtn">
      <i class="fas fa-info-circle"></i> Welcome</button>

        <div id="welcome" class="modal fade" role="dialog">
          <div class="modal-dialog">


            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title"> Welcome! </h5>
              </div>

              <div class="modal-body">
                <h3> What is this tool? </h3>
                <p> This is a tool designed to help decide where bus amenities should be allocated. A bus amenity is for our purposes either: a bench, a shelter, or a real time data display. In a broader sense, a bus amenity is something that improves a user's
                  experience when taking the bus. </p>

                <h3> What is a bus amenity? </h3>
                <p> A bus amenity is something that exists at a bus stop in order to improve the rider's experience. Amenities can be a large number of things, ranging from bike racks to benches to shelters to heaters. For our analysis, we are considering
                  a bus amenity to be either a bench, a shelter, or real time data display. </p>
                <h3> What do I do next? </h3>
                <p> Just follow the steps in the tool bar on the left hand side of the tool! For more info on each step, click the <i class="fas fa-info-circle" style="color:#1fa898"></i> button. </p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!--  -->
      <!--  -->
      <div class="checkbox-container">
        <div class="row">
          <div class="col-1">
            <a href="" data-toggle="modal" data-target="#dataSelectionModal" role="button">
    <i class="fas fa-info-circle"></i></a>
            <!-- Data selection modal -->
            <div id="dataSelectionModal" class="modal fade" role="dialog">
              <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <h3 class="modal-title">Step 1: Data Selection</h3>
                  </div>
                  <div class="modal-body">
                    <h3> What is this step doing?</h3>
                    <p> This step allows you to choose what stops will be considered for analysis. You can choose a category of stops to be considered by toggling the switch next to the category. <br><br>To further refine your dataset, click the filter
                      <i class="fas fa-filter" style="color:#1fa898"></i> button. </p>

                    <h3> What do the categories mean? </h3>
                    <p><b>Surface-level Light Rail</b>
                      <br> This includes surface level, non-gated Green Line stops and the stops served by the Mattapan Trolly. These stops, while not technically bus stops, are serviced by transit modes that are functionally similar to buses.
                      <br><br>
                      <b>Silver Line Stops</b>
                      <br> This includes silver line stops. The silver line is BRT (bus rapid transit). Due to high ridership and low average headway, the silver line stops are categorized separately from streetside bus stops. We
                      also have excluded SL3 because we do not have sufficient data.
                      <br><br>
                      <b>Streetside Bus Stops</b>
                      <br> These are all the other bus stops. </p>
                    <h3>Want to know more?</h3>
                    <p> Check out our <a href="#" data-toggle="modal" data-target="#moreInfo">More Info
 <i class="fas fa-info-circle"></i></a> section to see how the tool was created!</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <div class="col-10">
            <h3>Step 1: What stops should we analyze?</h3>
          </div>
        </div>

        <!--- ----->
        <!--- ----->
        <!-- SURFACE LEVEL LIGHT RAIL -->
        <!--- ----->
        <!--- ----->
        <div class="row">
          <div class="col-8 slider-label">
            <p> Surface-level Light Rail Stops</p>
          </div>
          <!-- Surface level Light Rail Toggle Slider -->
          <div class="col-4">
            <div class="row">
              <label class="switch" for="lrCheck"><span class="sr-only">Surface-Level Light Rail Stops</span>
        <input type="checkbox" id="lrCheck">
        <span class="toggle-slider round"></span>
      </label>
              <div class="toggle-settings" >
                <a href="" data-toggle="dropdown" id="lrFilter" role="button">
                  <i class="fas fa-filter" id="lrFilterIcon"></i></a>
                <ul class="dropdown-menu">
                  <!--- Label all checkboxes for accessibility --->
                  <li class="dropdown-header"> Green Line Branches </li>
                  <li><input type="checkbox" id="bCheck" />
                    <label for="bCheck">B</label></li>
                  <li><input type="checkbox" id='cCheck' />
                    <label for="cCheck">C</label></li>
                  <li><input type="checkbox" id='dCheck' />
                    <label for="dCheck">D</label></li>
                  <li><input type="checkbox" id='eCheck' />
                    <label for="eCheck">E</label></li>
                  <li class="dropdown-header"> Mattapan Trolley </li>
                  <label class="sr-only" for="mCheck">Include the Mattapan Trolly?</label>
                  <li><input type="checkbox" id='mCheck' checked="checked" /> M</li>
                </ul>
              </div>
            </div>
          </div>
        </div>





        <!--- ----->
        <!--- ----->
        <!--- SILVER LINE----->
        <!--- ----->
        <!--- ----->
        <div class="row">
          <div class="col-8 slider-label">
            <p> Surface-Level Silver Line Stops</p>
          </div>
          <div class="col-4">
            <div class="row">
              <label class="switch" for="slCheck"><span class="sr-only">Silver Line Stops</span>
        <input type="checkbox" id="slCheck">
        <span class="toggle-slider round"></span>
      </label>
              <div class="button-group toggle-settings" id="slCheckOptions">
                <a href="#" data-toggle="dropdown" role="button">
                  <i class="fas fa-filter" id="slFilterIcon"></i></a>
                <ul class="dropdown-menu">
                  <label class="sr-only" for="sl1andsl2Check">Include: </label>
                  <li><input type="checkbox" id='sl1andsl2Check' /> SL1 & SL2 </li>
                  <label class="sr-only" for="sl4andsl5Check">Include: </label>
                  <li><input type="checkbox" id='sl4andsl5Check' /> SL4 & SL5 </li>
                </ul>
              </div>
            </div>
          </div>
        </div>


        <!--- ----->
        <!--- ----->
        <!--- STREETSIDE MODAL ----->
        <!--- ----->
        <!--- ----->
        <div class="row">
          <div class="col-8 slider-label">
            <p> Streetside Bus Stops</p>
          </div>
          <div class="col-4">
            <div class="row">
              <label class="switch" for="streetBusCheck"><span class="sr-only">Streetside Bus Stops</span>
        <input type="checkbox" id="streetBusCheck">
        <span class="toggle-slider round"></span>
      </label>
              <div class="button-group toggle-settings" id="busCheckOptions">
                <a href="#" data-toggle="dropdown" role="button">
                  <i class="fas fa-filter" id="streetBusFilterIcon"></i></a>
                <ul class="dropdown-menu">
                  <label class="sr-only" for="keyBusCheck">Include: </label>
                  <li><input type="checkbox" id='keyBusCheck' /> Key Buses</li>
                  <label class="sr-only" for="otherBusCheck">Include: </label>
                  <li><input type="checkbox" id='otherBusCheck' /> All Other Buses</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>



      <!--  -->
      <!--  -->
      <!-- SLIDERS -->
      <!--  -->
      <!--  -->
      <div class="slidecontainer">
        <div class="row">
          <div class="col-1">
            <a href="#" data-toggle="modal" data-target="#indexModal"
           <i class="fas fa-info-circle"></i></a>

            <div id="indexModal" class="modal fade" role="dialog">
              <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <h3 class="modal-title">Step 2: Assessing the Stops</h3>
                  </div>

                  <div class="modal-body">
                    <h3> What is this step doing?</h3>
                    <p> This step is assessing each bus stop to see how in need of new amenities it is. You can use the range sliders to weight eahc category as you see fit. The tool then takes how you weighted each and uses that weight to assign a rank to
                      each stop. </p>
                    <h3> What do the categories mean?</h3>
                    <p><b>Vulnerability</b>
                      <br> This a measure of what populations are being served by the new bus amenities. Vulnerable populations for this model include how many households without vehicles, majority people of color households, and low income households,
                      are in the area around each bus stop. This category also includes data about how many seniors and TAP riders use each stop per day. The more vulnerable the population being served by the stop, the higher the score.
                      <br><br>
                      <img alt="Anatomy of a Trip: Origin to Transfer to Destination" src="tripAnatomy.png" width="100%" height="100%">
                      <b>Origin Ridership</b>
                      <br>This is a measure of how many people begin their MBTA journey at a given bus stop each day. Bus stops with a higher score have more people riding from there.
                      <br><br>
                      <b>Transfer Ridership</b>
                      <br> This is a measure of how many people transfer to a bus at a given bus stop each day. Bus stops with a higher score have more people transferring to a bus from there.
                      <br><br>
                    <h3>Want to know more?</h3>
                    <p> Check out the "More Info" button at the bottom of the tool bar</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <div class="col-10">
            <h3>Step 2: What needs do you want to consider?</h3>
          </div>

        </div>
        <!--- VALUE LABELS FOR THE SLIDERS --->
        <div class="row">
          <div class="col-4">
          </div>
          <div class="col-3" style="text-align:center;">
            <p style="font-size:.75em;">
              <i class="fa fa-arrow-left"></i> Lower Priority</p>
          </div>
          <div class="col-2">
          </div>
          <div class="col-3" style="text-align:center;">
            <p style="font-size:.75em">Higher Priority
            <i class="fa fa-arrow-right"></i></p>
          </div>
        </div>
        <!--- VULNERABILITY -->
        <div class="row" style="margin-bottom:0.5em;">
          <div class="col-4 slider-label">
            <label for="vulnsslider"> Vulnerable Populations Serviced</label>
          </div>
          <div class="col-8">
            <input type="range" min="0" max="4" step="1" class="slider"
            aria-valuemin="0" aria-valuemax="4" aria-valuenow="2" id="vulnsslider">
          </div>
        </div>

        <!--- ORIGIN RIDERSHIP -->
        <div class="row" style="margin-bottom:0.5em;">
          <div class="col-4 slider-label">
            <label for="riderslider"> Origin Ridership</label>
          </div>
          <div class="col-8">
            <input type="range" min="0" max="4" value="" step="1" class="slider"
            aria-valuemin="0" aria-valuemax="4" aria-valuenow="2" id="originslider">
          </div>
        </div>

        <!--- TRANSFER RIDERSHIP -->
        <div class="row">
          <div class="col-4 slider-label">
            <label for="riderslider"> Transfer Ridership</label>
          </div>
          <div class="col-8">
            <input type="range" min="0" max="4" value="" step="1" class="slider"
            aria-valuemin="0" aria-valuemax="4" aria-valuenow="2" id="transferslider">
          </div>
        </div>



        <div class="toolbar-section" >
        <div class="row">
          <div class="col-1">
          </div>
          <div class="col-11">
            <h3> Step 3: What does this look like?</h3>
          </div>
        </div>
        <div class="row">
          <button class="btn btn-block submit" style="background-color:#e58652" id="submit"
          data-toggle="tooltip" title="Adjusts map to show your selections">
          <i class="fas fa-map-marked-alt"></i>  Visualize Changes
        </button>
        </div>
      </div>


        <!--  -->
        <!--  -->
        <!-- BUTTON BAG -->
        <!--  -->
        <!--  -->
        <div class="toolbar-section">
        <div class="row">
          <div class="col-1">
          </div>
          <div class="col-11">
            <h3> Step 4: What next? </h3>
          </div>
        </div>
        <div class="row button-container">
          <div class="button-bag">
            <button id="toggleTowns" class="btn btn-sm"> Toggle Town Layer </button>
            <button id="toggleShelters" class="btn btn-sm"
            data-toggle="tooltip" title="Turns on layer showing current bus shelter invetory">
            Toggle Shelter Layer </button>
            <button class="btn btn-sm" style="background-color:#1b4e60" id="reset">
      <i class="fas fa-map-marked-alt"></i>  Reset Map
    </button>
          </div>
        </div>
        <div class="row button-container">
          <div class="button-bag">
            <!-- Trigger the modal with a button -->

            <button type="button" class="btn btn-sm" data-toggle="modal" data-target="#moreInfo">
          <i class="fas fa-info-circle"></i> More Info</button>
            <!-- Modal -->
            <div id="moreInfo" class="modal fade" role="dialog">
              <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <h3 class="modal-title">How was this model created?</h3>
                  </div>

                  <div class="modal-body">
                    <p>The actual model hasn't been finalized yet, so this section will be filled out later.</p>
                    <p>For each stop, we caluclated a z score using the following formula: </p>
                    <br><br>
                    <img alt="Z score is calculated by subtracting the data point from the sample mean, then dividing by sample standard deviation"
                    src="zscoreFormula.png" width="30%" height="15%">
                    <p>For more info about OPMI, check out our
                      <a href="http://www.mbtabackontrack.com/performance/index.html#/home">website</a>
                    </p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </div>
                </div>

              </div>
            </div>
            <button id="export" class="btn btn-sm" data-toggle="tooltip" title="Exports data as .csv">
         <i class="fas fa-file-download"></i>  Download </button>
            <div id="test"></div>
          </div>
        </div>
      </div>

      </div>

      <div class="bottom-bar">
        <h4> Made with <i class = "fas fa-heart" style="color:#ffbaad"></i> by OPMI </h4>
        <p style="color:white">Processed with <i class="fas fa-coffee"></i> by interns </p>
        <br>
      </div>
    </div>




    <!--  -->
    <!--  -->
    <!-- MAP -->
    <!--  -->
    <!--  -->
    <div class="col-8" id="right-hand-map">

      <div id="mapid">
      </div>


    </div>


  </div>

  <!--  -->
  <!--  -->
  <!-- BOTTOM BAR -->
  <!--  -->
  <!--  -->



</body>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script type="text/javascript" src="bustool.js"></script>
<script type="text/javascript" src="silverLineStops.js"></script>
<script type='text/javascript' src='data-selection.js'></script>
<script type='text/javascript' src='static-scores.js'></script>
<script type="text/javascript" src="bustoolmap.js"></script>

</html>
